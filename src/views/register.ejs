<!DOCTYPE html>
<html lang="en">
<%- include('./partials/head') %>
    <body>
        <%- include('./partials/header') %>
            <div class="container register-container">

                <!-- Default form register -->
                <form class="text-center border border-light p-5 sign-up-form" action="/user/register" method="POST">
                
                <p class="h4 mb-4 register-title">Súmate a ELIJO</p>
                <!-- GOOGLE DIV-->
                <div id="my-signin2"></div>
                <!-- /GOOGLE DIV-->
                
                <div class="form-row mb-4">
                    <div class="col">
                        <!-- First name -->
                        <input type="text" id="defaultRegisterFormFirstName" class="form-control name" name="name" placeholder="Nombre">
                        <small class="text-danger erName"></small>
                        <% if(typeof errors != 'undefined') {%>
                            <% for(let i = 0 ; i < errors.length ; i++){ %> 
                                <% if(errors[i].param == 'name'){ %> 
                                    <small class="text-danger"><%= errors[i].msg %> </small>
                                <% } %>      
                            <% } %>  
                        <% } %>  
                    </div>
                    <div class="col">
                        <!-- Last name -->
                        <input type="text" id="defaultRegisterFormLastName" class="form-control last_name" name="last_name" placeholder="Apellido">
                        <small class="text-danger erLastName"></small>
                        <% if(typeof errors != 'undefined') {%>
                            <% for(let i = 0 ; i < errors.length ; i++){ %> 
                                <% if(errors[i].param == 'last_name'){ %> 
                                    <small class="text-danger"><%= errors[i].msg %> </small>
                                <% } %>      
                            <% } %>  
                        <% } %>  
                    </div>
                </div>
                
                <!-- E-mail -->
                <input type="email" id="defaultRegisterFormEmail" class="form-control mb-4 email" placeholder="E-mail" name="email">
                <small class="text-danger erEmail"></small>
                <% if(typeof errors != 'undefined') {%>
                    <% for(let i = 0 ; i < errors.length ; i++){ %> 
                        <% if(errors[i].param == 'email'){ %> 
                            <small class="text-danger"><%= errors[i].msg %> </small>
                        <% } %>      
                    <% } %>  
                <% } %>  
       
                
                <!-- Password -->
                <input type="password" id="defaultRegisterFormPassword" class="form-control password" placeholder="Contraseña" aria-describedby="defaultRegisterFormPasswordHelpBlock" name="password">
                <small id="defaultRegisterFormPasswordHelpBlock" class="form-text text-muted mb-4">
                    La contraseña debe contener al menos 8 cáracteres.
                </small>
                <small class="text-danger erPassword"></small>
                <% if(typeof errors != 'undefined') {%>
                    <% for(let i = 0 ; i < errors.length ; i++){ %> 
                        <% if(errors[i].param == 'password'){ %> 
                            <small class="text-danger"><%= errors[i].msg %> </small>
                        <% } %>      
                    <% } %>  
                <% } %>  
                
                <!-- Phone number -->
                <input type="text" id="defaultRegisterPhonePassword" class="form-control telephone" placeholder="Telefono +5491122334455" aria-describedby="defaultRegisterFormPhoneHelpBlock" name="telephone">
                <small id="defaultRegisterFormPhoneHelpBlock" class="form-text text-muted mb-4">
                    Preferentemente celular con whatsapp, para comunicarnos mejor
                </small>
                <small class="text-danger erTelephone"></small>
                <% if(typeof errors != 'undefined') {%>
                    <% for(let i = 0 ; i < errors.length ; i++){ %> 
                        <% if(errors[i].param == 'telephone'){ %> 
                            <div class="row">
                                <small class="text-danger col-12"><%= errors[i].msg %> </small>
                            </div>
                        <% } %>      
                    <% } %>  
                <% } %>  

                <!-- Rol -->
                <label for="opt1" class="radio">
                    <input type="radio" id="opt1" value="2" name="rol" class="hidden rol"/>
                    <span class="label"></span>Actual Estudiante
                </label>                            
                <label for="opt2" class="radio">
                    <input type="radio" id="opt2" value="3" name="rol" class="hidden rol"/>
                    <span class="label"></span>Futuro Estudiante
                </label>    
                <small class="text-danger erRol"></small>
                <% if(typeof errors != 'undefined') {%>
                    <% for(let i = 0 ; i < errors.length ; i++){ %> 
                        <% if(errors[i].param == 'rol'){ %> 
                            <div class="row">
                                <small class="text-danger col-12"><%= errors[i].msg %> </small>
                            </div>
                        <% } %>      
                    <% } %>  
                <% } %>                          
                
                <!-- Sign up button -->
                <button class="btn btn-info my-4 btn-block btn-log-reg submitBtn" type="submit">Registrarme</button>
                
                <!-- Terms of service -->
                <p>Al hacer click en
                    <em>Registrarse</em> aceptas nuestros
                    <a href="" target="_blank">términos de servicio</a>
                    
                </form>
                <!-- Default form register -->
                
            </div>
            
            <!-- GOOGLE SCRIPTS -->
        
            <script>
                function onSuccess(googleUser) {
                  console.log('Logged in as: ' + googleUser.getBasicProfile().getName());
                }
                function onFailure(error) {
                  console.log(error);
                }
                function renderButton() {
                  gapi.signin2.render('my-signin2', {
                    'scope': 'profile email',
                    'width': 240,
                    'height': 50,
                    'longtitle': true,
                    'theme': 'dark',
                    'onsuccess': onSuccess,
                    'onfailure': onFailure
                  });
                }
            </script>
            
            <script src="https://apis.google.com/js/platform.js?onload=renderButton" async defer></script>

            <script>
                function onSignIn(googleUser) {
                // Useful data for your client-side scripts:
                var profile = googleUser.getBasicProfile();
                console.log("ID: " + profile.getId()); // Don't send this directly to your server!
                console.log('Full Name: ' + profile.getName());
                console.log('Given Name: ' + profile.getGivenName());
                console.log('Family Name: ' + profile.getFamilyName());
                console.log("Image URL: " + profile.getImageUrl());
                console.log("Email: " + profile.getEmail());
                // The ID token you need to pass to your backend:
                var id_token = googleUser.getAuthResponse().id_token;
                console.log("ID Token: " + id_token);
                }
            </script>
            
            <!-- /GOOGLE SCRIPTS -->
            <!-- JS SCRIPTS -->
            <script src="/js/register.js"></script>
            <%- include('./partials/scripts.ejs') %>
            <%- include('./partials/footer') %>  
    </body>
</html>